<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script src="https://use.typekit.net/xbr6agj.js"></script><script>try{Typekit.load({ async: true });}catch(e){}</script><script>window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = '6WVGW';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[`;`]*`[`;`]*`[`;`]*`')){
d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+
';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};
})(window,document,window['_fs_namespace'],'script','user');
</script><title> Adding a Search Bar in Table View · Raj Abishek</title><meta name="description" content="Adding a Search Bar in Table View - Raj Abishek"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/logo.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">Blog</a></li><li class="nav-list-item"><a href="https://dribbble.com/rajabishek" target="_blank" class="nav-list-link">Dribbble</a></li><li class="nav-list-item"><a href="https://in.linkedin.com/in/rajabishek" target="_blank" class="nav-list-link">LinkedIn</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">Rss</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Adding a Search Bar in Table View</h1><div class="post-info">Aug 4, 2016</div><div class="post-content"><h2 id="Filtering-amp-Searching-information"><a href="#Filtering-amp-Searching-information" class="headerlink" title="Filtering &amp; Searching information"></a>Filtering &amp; Searching information</h2><p>If you have a large dataset to present, scrolling through a large list becomes slow and frustrating. In that case, it’s essential that we allow users to search for specific items. <code>UISearchController</code> which seamlessly integrates with <code>UITableView</code> allows for quick, responsive filtering of information and solves the very same problem.</p>
<a id="more"></a>
<ul>
<li>Create a <code>UISearchController</code> instance as an instance of the view controller, give the searchResultsController while creating as nil meaning we would like to use the same table for search results also</li>
<li>Set the searchResultsUpdater property of search controller as self(view controller), meaning view controller would be responsible for updating the search results for the search controller. View controller has to conform to UISearchResultsUpdating protocol.</li>
<li>Set the <code>dimsBackgroundDuringPresentation</code> property on search controller to false, usually the search controller will dim the background while showing the search results, but since we are using the same table view to show the results we would not want this behavior.</li>
<li>On the view controller set the <code>definesPresentationContext</code> property to true, it means that the search bar must be hidden when navigating away from the view controller even though it is currently active.</li>
<li>Set the scope button titles for the search bar</li>
<li>Set the delegate of the search bar to the view controller. View controller has to conform to <code>UISearchBarDelegate</code> protocol.</li>
<li>Add the search bar as the header of the table view</li>
<li>updateSearchResultsForSearchController method is called every time a user changes the contents if the search bar text. It is method of the <code>UISearchResultsUpdating</code> protocol, it is the only compulsory method of the protocol.</li>
<li>selectedScopeButtonIndexDidChange method is called every time a different scope button is pressed. This method is from the <code>UISearchBarDelegate</code> protocol, however it is not a compulsory method.<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DevicesTableViewController</span>: <span class="title">UITableViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> devices = [<span class="type">Device</span>(name: <span class="string">"Iphone 5c"</span>, type: <span class="string">"Mobile"</span>), <span class="type">Device</span>(name: <span class="string">"Oneplus x"</span>, type: <span class="string">"Mobile"</span>), <span class="type">Device</span>(name: <span class="string">"Macbook Pro"</span>, type: <span class="string">"Laptop"</span>), <span class="type">Device</span>(name: <span class="string">"Apple Watch"</span>, type: <span class="string">"Watch"</span>), <span class="type">Device</span>(name: <span class="string">"Moto 360"</span>, type: <span class="string">"Watch"</span>), <span class="type">Device</span>(name: <span class="string">"Samsung Galaxy"</span>, type: <span class="string">"Mobile"</span>), <span class="type">Device</span>(name: <span class="string">"Dell Vostro"</span>, type: <span class="string">"Laptop"</span>), <span class="type">Device</span>(name: <span class="string">"Dell Inspiron"</span>, type: <span class="string">"Laptop"</span>)]</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> filteredDevices = [<span class="type">Device</span>]()</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> searchController = <span class="type">UISearchController</span>(searchResultsController: <span class="literal">nil</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        searchController.searchResultsUpdater = <span class="keyword">self</span></div><div class="line">        searchController.dimsBackgroundDuringPresentation = <span class="literal">false</span></div><div class="line">        definesPresentationContext = <span class="literal">true</span></div><div class="line">        searchController.searchBar.scopeButtonTitles = [<span class="string">"All"</span>, <span class="string">"Mobile"</span>, <span class="string">"Laptop"</span>, <span class="string">"Watch"</span>]</div><div class="line">        searchController.searchBar.delegate = <span class="keyword">self</span></div><div class="line">        tableView.tableHeaderView = searchController.searchBar</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didReceiveMemoryWarning</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.didReceiveMemoryWarning()</div><div class="line">        <span class="comment">// Dispose of any resources that can be recreated.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// MARK: - Table view data source</span></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">numberOfSectionsInTableView</span><span class="params">(tableView: UITableView)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">if</span> searchController.active &#123;</div><div class="line">            <span class="keyword">return</span> filteredDevices.<span class="built_in">count</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> devices.<span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</div><div class="line">        <span class="keyword">let</span> cell = tableView.dequeueReusableCellWithIdentifier(<span class="string">"Cell"</span>, forIndexPath: indexPath)</div><div class="line"></div><div class="line">        <span class="comment">// Configure the cell...</span></div><div class="line">        <span class="keyword">let</span> device = searchController.active ? filteredDevices[indexPath.row] : devices[indexPath.row]</div><div class="line">        cell.textLabel?.text = device.name</div><div class="line">        cell.detailTextLabel?.text = device.type</div><div class="line"></div><div class="line">        <span class="keyword">return</span> cell</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">DevicesTableViewController</span>: <span class="title">UISearchResultsUpdating</span>, <span class="title">UISearchBarDelegate</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">filterContentForSearchText</span><span class="params">(searchText: String, scope: String = <span class="string">"All"</span>)</span></span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> searchText == <span class="string">""</span> &#123;</div><div class="line">            filteredDevices = devices.<span class="built_in">filter</span> &#123; device <span class="keyword">in</span></div><div class="line">                <span class="keyword">return</span> (scope == <span class="string">"All"</span>) || (device.type == scope)</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            filteredDevices = devices.<span class="built_in">filter</span> &#123; device <span class="keyword">in</span></div><div class="line">                <span class="keyword">let</span> categoryMatch = (scope == <span class="string">"All"</span>) || (device.type == scope)</div><div class="line">                <span class="keyword">return</span> categoryMatch &amp;&amp; device.name.lowercaseString.containsString(searchController.searchBar.text!.lowercaseString)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        tableView.reloadData()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateSearchResultsForSearchController</span><span class="params">(searchController: UISearchController)</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> searchBar = searchController.searchBar</div><div class="line">        <span class="keyword">let</span> scope = searchBar.scopeButtonTitles![searchBar.selectedScopeButtonIndex]</div><div class="line">        filterContentForSearchText(searchController.searchBar.text!, scope: scope)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">searchBar</span><span class="params">(searchBar: UISearchBar, selectedScopeButtonIndexDidChange selectedScope: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> searchBar = searchController.searchBar</div><div class="line">        <span class="keyword">let</span> scope = searchBar.scopeButtonTitles![searchBar.selectedScopeButtonIndex]</div><div class="line">        filterContentForSearchText(searchController.searchBar.text!, scope: scope)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li>
</ul>
</div></article></div></section><footer><div class="paginator"><a href="/2016/Whats-new-swift-3/" class="prev">PREV</a><a href="/2016/Sending-an-email-from-iOS/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://rajabishek.com">Raj Abishek</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-93252193-1",'auto');ga('send','pageview');</script></body></html>