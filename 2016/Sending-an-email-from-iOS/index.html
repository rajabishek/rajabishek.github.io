<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script src="https://use.typekit.net/xbr6agj.js"></script><script>try{Typekit.load({ async: true });}catch(e){}</script><script>window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = '6WVGW';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[`;`]*`[`;`]*`[`;`]*`')){
d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+
';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};
})(window,document,window['_fs_namespace'],'script','user');
</script><title> Sending an Email From iOS · Raj Abishek</title><meta name="description" content="Sending an Email From iOS - Raj Abishek"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/logo.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">Blog</a></li><li class="nav-list-item"><a href="https://dribbble.com/rajabishek" target="_blank" class="nav-list-link">Dribbble</a></li><li class="nav-list-item"><a href="https://in.linkedin.com/in/rajabishek" target="_blank" class="nav-list-link">LinkedIn</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">Rss</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Sending an Email From iOS</h1><div class="post-info">Aug 2, 2016</div><div class="post-content"><h2 id="It’s-all-about-delegation"><a href="#It’s-all-about-delegation" class="headerlink" title="It’s all about delegation"></a>It’s all about delegation</h2><p>A simple task of sending an email is also achieved in iOS through the delegation pattern. The basic concept is that we create an email view controller where the user can type the email details and set its delegate to which it will respond back with the results once the user has finished.</p>
<a id="more"></a>
<h2 id="Procedure-Breakdown"><a href="#Procedure-Breakdown" class="headerlink" title="Procedure Breakdown"></a>Procedure Breakdown</h2><ul>
<li>1st step would be to design the mail form on the storyboard scene and add the subject,body fields as outlets and connect the send mail button as an a action</li>
<li>Now we need to import the <code>MessageUI</code> framework to send a mail from the view controller, the MessageUI framework en composes all the email related classes and protocols</li>
<li>Also make the view controller to conform to the <code>MFMailComposeViewControllerDelegate</code>, what we are actually doing is we will be presenting a view controller that will be responsible for sending the email and that controller will respond back to its delegate with information such as mail was sent successfully, mail was canceled, error in sending email etc, so we are essentially conforming to the delegate protocol as we want our view controller to be the delegate of that mail controller which we present eventually</li>
<li>Now the next step would be to create the mail view controller will the subject, recipients, body</li>
<li>Next we set the delegate of this newly created mail controller to be the view controller itself</li>
<li>Now we present the mail controller on the screen</li>
<li>Now we add the delegate methods to which the mail controller will respond back with information</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">import</span> MessageUI</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">sendEmailButtonTapped</span><span class="params">(sender: AnyObject)</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> mailComposeViewController = configuredMailComposeViewController()</div><div class="line">        <span class="keyword">if</span> <span class="type">MFMailComposeViewController</span>.canSendMail() &#123;</div><div class="line">            <span class="keyword">self</span>.presentViewController(mailComposeViewController, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">self</span>.showSendMailErrorAlert()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">configuredMailComposeViewController</span><span class="params">()</span></span> -&gt; <span class="type">MFMailComposeViewController</span> &#123;</div><div class="line">        <span class="keyword">let</span> mailComposeViewController = <span class="type">MFMailComposeViewController</span>()</div><div class="line"></div><div class="line">        <span class="comment">// Extremely important to set the --mailComposeDelegate-- property, NOT the --delegate-- property</span></div><div class="line">        mailComposeViewController.mailComposeDelegate = <span class="keyword">self</span> </div><div class="line">        </div><div class="line">        mailComposeViewController.setToRecipients([<span class="string">"someone@somewhere.com"</span>])</div><div class="line">        mailComposeViewController.setSubject(<span class="string">"Sending you an in-app e-mail..."</span>)</div><div class="line">        mailComposeViewController.setMessageBody(<span class="string">"Sending e-mail in-app is not so bad!"</span>, isHTML: <span class="literal">false</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> mailComposeViewController</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showSendMailErrorAlert</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> sendMailErrorAlert = <span class="type">UIAlertView</span>(title: <span class="string">"Could Not Send Email"</span>, message: <span class="string">"Your device could not send e-mail.  Please check e-mail configuration and try again."</span>, delegate: <span class="keyword">self</span>, cancelButtonTitle: <span class="string">"OK"</span>)</div><div class="line">        sendMailErrorAlert.show()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Conform to the MFMailComposeViewControllerDelegate protocol</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ViewController</span>: <span class="title">MFMailComposeViewControllerDelegate</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">func</span> <span class="title">mailComposeController</span><span class="params">(controller: MFMailComposeViewController!, didFinishWithResult result: MFMailComposeResult, error: NSError!)</span></span> &#123;</div><div class="line">    	<span class="keyword">switch</span> (result) &#123;</div><div class="line">	        </div><div class="line">	        <span class="keyword">case</span> <span class="type">MFMailComposeResultSent</span>:</div><div class="line">	            <span class="built_in">print</span>(<span class="string">"The email message was queued in the user’s outbox. It is ready to send the next time the user connects to email."</span>)</div><div class="line">	        </div><div class="line">	        <span class="keyword">case</span> <span class="type">MFMailComposeResultSaved</span>:</div><div class="line">	            <span class="built_in">print</span>(<span class="string">"The email message was saved in the user’s Drafts folder."</span>)</div><div class="line">	        </div><div class="line">	        <span class="keyword">case</span> <span class="type">MFMailComposeResultCancelled</span>:</div><div class="line">	            <span class="built_in">print</span>(<span class="string">"The user canceled the operation. No email message was queued."</span>)</div><div class="line">	        </div><div class="line">	        <span class="keyword">case</span> <span class="type">MFMailComposeResultFailed</span>:</div><div class="line">	            <span class="built_in">print</span>(<span class="string">"The email message was not saved or queued, possibly due to an error."</span>)</div><div class="line">	        </div><div class="line">	        <span class="keyword">default</span>:</div><div class="line">	            <span class="built_in">print</span>(<span class="string">"An error occurred when trying to compose this email"</span>)</div><div class="line">	    &#125;</div><div class="line">        controller.dismissViewControllerAnimated(<span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div></article></div></section><footer><div class="paginator"><a href="/2016/Adding-a-search-bar-in-table-view/" class="prev">PREV</a><a href="/2016/Network-requests-with-NSURLSession/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://rajabishek.com">Raj Abishek</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-93252193-1",'auto');ga('send','pageview');</script></body></html>