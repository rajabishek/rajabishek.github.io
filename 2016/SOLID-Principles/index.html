<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script src="https://use.typekit.net/xbr6agj.js"></script><script>try{Typekit.load({ async: true });}catch(e){}</script><script>window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = '6WVGW';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[`;`]*`[`;`]*`[`;`]*`')){
d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+
';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};
})(window,document,window['_fs_namespace'],'script','user');
</script><title> SOLID Principles · Raj Abishek</title><meta name="description" content="SOLID Principles - Raj Abishek"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/logo.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">Blog</a></li><li class="nav-list-item"><a href="https://dribbble.com/rajabishek" target="_blank" class="nav-list-link">Dribbble</a></li><li class="nav-list-item"><a href="https://in.linkedin.com/in/rajabishek" target="_blank" class="nav-list-link">LinkedIn</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">Rss</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">SOLID Principles</h1><div class="post-info">May 5, 2016</div><div class="post-content"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>SOLID is a mnemonic acronym introduced by Michael Feathers and Bob Martin that refers to a set of five principles, when applied together, intend to make it more likely that a programmer will create a system that is easy to maintain and extend over time. The five principles are as follows:</p>
<ul>
<li>S - <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle" target="_blank" rel="external">Single Responsibility Principle</a></li>
<li>O - <a href="https://en.wikipedia.org/wiki/Open/closed_principle" target="_blank" rel="external">Open/Closed Principle</a></li>
<li>L - <a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle" target="_blank" rel="external">Liskov Substitution Principle</a></li>
<li>I - <a href="https://en.wikipedia.org/wiki/Interface_segregation_principle" target="_blank" rel="external">Interface Segregation Principle</a></li>
<li>D - <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle" target="_blank" rel="external">Dependency Inversion Principle</a></li>
</ul>
<a id="more"></a>
<p>Let’s dive deeper into each one of these principles and look at some examples. The code sample presented in this article will be written in Swift, however the principles are merely guidelines that can be applied in any object oriented programming language while working on software to remove code smells.</p>
<h2 id="Single-Responsibility-Principle"><a href="#Single-Responsibility-Principle" class="headerlink" title="Single Responsibility Principle"></a>Single Responsibility Principle</h2><p>The single responsibility principle states that every module or class should have responsibility over a single part of the functionality provided by the software. It helps in keeping classes and methods small and maintainable making them easier to understand.</p>
<p>Now that we understand that a class should be responsible for only one thing, so how do we identify the responsibility of a class ?</p>
<p>Identifying the responsibilities of a class is pretty simple. Lets say you want to change the way how a particular feature is implemented and now to make that change if you have to make structural changes to the class, then that feature is a responsibility of this class. Therefore following single responsibility principle makes sure that any class has only one reason to change.</p>
<p>A TaxCalculator class will need to change only if you want to change the way in which tax is calculated. For any other reason if you are making a change in the TaxCalculator class then it means that TaxCalculator is responsible for multiple things, which clearly violates the Single Responsibility Principle. Let’s look at an example of some code that isn’t following the principle:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">FoodType</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Starter</span></div><div class="line">    <span class="keyword">case</span> <span class="type">MainCourse</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Desert</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Food</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> price: <span class="type">Double</span></div><div class="line">    <span class="keyword">var</span> type: <span class="type">FoodType</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BillCalculator</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> items: [<span class="type">Food</span>]</div><div class="line"></div><div class="line">    <span class="keyword">init</span>(items: [<span class="type">Food</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.items = items</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">calculateAmount</span><span class="params">()</span></span> -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">var</span> price = <span class="number">0.0</span></div><div class="line">        <span class="keyword">for</span> food <span class="keyword">in</span> items &#123;</div><div class="line">            price += food.price + calculateTax(food.price)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> price</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">calculateTax</span><span class="params">(price: Double)</span></span> -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0.10</span> * price</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>First lets analyze the responsibilities of this class. If we need to change how the bill is calculated, let say we don’t bill the deserts anymore (deserts are free) then we will have to change the <code>calculateAmount</code> method. If we need to change how tax is calculate for a food item then will have to change the <code>calculateTax</code> method. So as you can see here the <code>BillCalculator</code> class is responsible for multiple things, it is responsible for how the food items are billed and how the tax is calculated for a food item. The fact that we can identify multiple reasons to change signals a violation of the Single Responsibility Principle.</p>
<p>We can do a quick refactor and get our code in compliance with the Single Responsibility Principle. Let’s take a look:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TaxCalculator</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">calculateTax</span><span class="params">(food: Food)</span></span> -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0.10</span> * food.price</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BillCalculator</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> items: [<span class="type">Food</span>]</div><div class="line"></div><div class="line">    <span class="keyword">init</span>(items: [<span class="type">Food</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.items = items</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">calculateAmount</span><span class="params">()</span></span> -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">var</span> price = <span class="number">0.0</span></div><div class="line">        <span class="keyword">for</span> food <span class="keyword">in</span> items &#123;</div><div class="line">            price += food.price + calculateTax(food)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> price</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">calculateTax</span><span class="params">(food: Food)</span></span> -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">TaxCalculator</span>.calculateTax(food)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>We now have two smaller classes that handle the two specific tasks. We have <code>TaxCalculator</code> class that is responsible for calculating the tax amount for a given food item and the <code>BillCalculator</code> is responsible for how the food items are billed. Now we will have to change the <code>TaxCalculator</code> only if we need to change the way in which tax is calculated for a food item, similarly we will need to change the <code>BillCalculator</code> class only if we want to change the way in which food items are billed.</p>
<h2 id="Open-Closed-Principle"><a href="#Open-Closed-Principle" class="headerlink" title="Open/Closed Principle"></a>Open/Closed Principle</h2><p>In object-oriented programming, the open/closed principle states that classes or methods should be open for extension, but closed for modification i.e, such an entity can allow its behavior to be extended without modifying its source code. Let’s look at an example of some code that isn’t following the principle:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReportManager</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> data: [<span class="type">String</span>]</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(data:[<span class="type">String</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.data = data</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generateExcelReport</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in Excel format</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generatePDFReport</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in PDF format</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As you can see in the above code if we have to now generate report in HTML format also, now we will have to update the <code>ReportManager</code> class. This violates the Open/Closed Principle. Always remember that whenever you touch an existing code there is always a possibility for breakage. What we essentially want is the ability to extend the behavior of the system without making modifications to the existing code. This is generally achieved through the use of patterns such as the <a href="https://en.wikipedia.org/wiki/Strategy_pattern" target="_blank" rel="external">strategy pattern</a>. Let’s take a look at how we might modify this code to make it open to extension:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(data: [String])</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExcelReportGenerator</span>: <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(data: [String])</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in Excel format</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PDFReportGenerator</span>: <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(data: [String])</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in PDF format</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReportManager</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> data: [<span class="type">String</span>]</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(data:[<span class="type">String</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.data = data</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generateReport</span><span class="params">(generator: CanGenerateReport)</span></span> &#123;</div><div class="line">        generator.generate(data)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>With this re factor we’ve made it possible to add new report generators without changing any existing code. To add a new report generator that can generate reports in HTML format we just add another new class that conforms to the <code>CanGenerateReport</code> protocol and write its implementation. We don’t even need to touch the <code>ReportManager</code> class to bring about this change.<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTMLReportGenerator</span>: <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(data: [String])</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in HTML format</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Liskov-Substitution-Principle"><a href="#Liskov-Substitution-Principle" class="headerlink" title="Liskov Substitution Principle"></a>Liskov Substitution Principle</h2><p>This principle states that if S is a subtype of T, then objects of type T may be replaced with objects of type S without creating any unexpected or incorrect behaviors, i.e we should be able to replace any instances of a parent class with an instance of one of its children.<br>In essence if a program module is using a base class, then the reference to the base class can be replaced with a derived class without affecting the functionality of the program module. Let’s look at an example of some code that isn’t following the principle:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">    <span class="keyword">var</span> width: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">    <span class="keyword">var</span> height: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setWidth</span><span class="params">(width: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span>.width = width;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setHeight</span><span class="params">(height: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span>.height = height;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">getArea</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.width * <span class="keyword">self</span>.height;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span>: <span class="title">Rectangle</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">setWidth</span><span class="params">(width: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span>.width = width;</div><div class="line">        <span class="keyword">self</span>.height = width;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">setHeight</span><span class="params">(height: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span>.height = height;</div><div class="line">        <span class="keyword">self</span>.width = height;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Random</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">getRectangle</span><span class="params">()</span></span> -&gt; <span class="type">Square</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Square</span>()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> r: <span class="type">Rectangle</span> = <span class="type">Random</span>.getRectangle();</div><div class="line"></div><div class="line"><span class="comment">// Developer knows that r it's a rectangle.</span></div><div class="line"><span class="comment">// He's able to set the width and height as for the base class</span></div><div class="line">r.setWidth(<span class="number">5</span>);</div><div class="line">r.setHeight(<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="comment">// now he's surprised to see that the area is 100 instead of 50.</span></div><div class="line"><span class="built_in">print</span>(r.getArea())</div></pre></td></tr></table></figure></p>
<h2 id="Interface-Segregation-Principle"><a href="#Interface-Segregation-Principle" class="headerlink" title="Interface Segregation Principle"></a>Interface Segregation Principle</h2><p>This principle is less relevant in dynamic languages. Since loosely typed languages don’t require the data types be specified in code this principle can’t be violated. The principle states that no client should be forced to depend on methods it does not use. Let’s look at an example of some code that isn’t following the principle:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReportManager</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> data: [<span class="type">String</span>]</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(data:[<span class="type">String</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.data = data</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generateReport</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report with the data</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">uploadReport</span><span class="params">(data: [String])</span></span> &#123;</div><div class="line">        <span class="comment">// Upload the report with the data</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Controller</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(generator: ReportManager)</span></span> &#123;</div><div class="line">        generator.generateReport()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Here we have a violation of the Interface Segregation Principle. Here the <code>generate</code> method of the <code>Controller</code> class depends on the <code>ReportManager</code> class for its implementation. The <code>ReportManager</code> class has two methods one for generating a report and another for uploading a report. Here the <code>generate</code> method of the <code>Controller</code> class depends on <code>generateReport</code> but does not care about <code>uploadReport</code>. Let’s take advantage of Swift’s protocols to fix this to adhere to the Interface Segregation Principle.<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> data: [<span class="type">String</span>] &#123; <span class="keyword">get</span> &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generateReport</span><span class="params">()</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReportManager</span>: <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> data: [<span class="type">String</span>]</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(data:[<span class="type">String</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.data = data</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generateReport</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report with the data</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">uploadReport</span><span class="params">(data: [String])</span></span> &#123;</div><div class="line">        <span class="comment">// Upload the report with the data</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Controller</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(generator: CanGenerateReport)</span></span> &#123;</div><div class="line">        generator.generateReport()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Here as you can see now that the <code>generate</code> method now depends on the <code>CanGenerateReport</code> type. This is an improvement because now we can pass any instance to the <code>generate</code> method that adheres to the <code>CanGenerateReport</code> protocol. If you really think about it, all that the <code>generate</code> method needs is just a instance that knows how to generate a report, it doesn’t actually depend on a <code>ReportManager</code> that knows to do a lot of other things also.<br>We can also pass an instance of the following class to the <code>generate</code> method and it would work absolutely fine.<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PDFReportGenerator</span>: <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generateReport</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in PDF format with the data</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Therefore interface segregation is all about being minimal with respect to the data type of dependencies that you require to implement a particular piece of functionality.</p>
<h2 id="Dependency-Inversion-Principle"><a href="#Dependency-Inversion-Principle" class="headerlink" title="Dependency Inversion Principle"></a>Dependency Inversion Principle</h2><p>The Dependency Inversion Principle states that the  high-level modules (business logic) should not depend on low-level modules (database querying/IO). Often this pattern is used to achieve the Open/Closed Principle that we discussed above. Let’s look at an example following the principle:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(data: [String])</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExcelReportGenerator</span>: <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(data: [String])</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in Excel format</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PDFReportGenerator</span>: <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(data: [String])</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in PDF format</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReportManager</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> data: [<span class="type">String</span>]</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(data:[<span class="type">String</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.data = data</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generateReport</span><span class="params">(generator: CanGenerateReport)</span></span> &#123;</div><div class="line">        generator.generate(data)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> manager = <span class="type">ReportManager</span>([<span class="string">"Apple Watch"</span>,<span class="string">"Apple iPhone"</span>]);</div><div class="line"></div><div class="line">manager.generateReport(<span class="type">PDFReportGenerator</span>()); <span class="comment">//Generates report in PDF format</span></div></pre></td></tr></table></figure></p>
<p>As you can see, our high-level object, the report manager, does not depend directly on an implementation of a lower-level object, PDF and Excel report generators. All that the <code>generateReport</code> method of the <code>ReportManager</code> class depends on is an instance that conforms to the <code>CanGenerateReport</code> protocol i.e an instance that knows how to generate a report. It can be any report generator (XML, PDF, HTML, Excel). It doesn’t depend on the lower level implementation details, it only depends on a higher level abstraction.</p>
<p>The flexibility that we get by following this rule is that we can substitute any specific implementation easily.<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> manager = <span class="type">ReportManager</span>([<span class="string">"Apple Watch"</span>,<span class="string">"Apple iPhone"</span>]);</div><div class="line"></div><div class="line"><span class="comment">//manager.generateReport(PDFReportGenerator()); //Generates report in PDF format</span></div><div class="line">manager.generateReport(<span class="type">ExcelReportGenerator</span>()); <span class="comment">//Generates report in Excel format</span></div></pre></td></tr></table></figure></p>
<p>As you can see above we can easily change the report to be generated in Excel format instead of PDF by altering just a single line of code. It becomes easy to invert the dependency on the fly.</p>
<p>Lets say now your company wants you to generate reports in XML format. All that we need to do now is first create a <code>XMLReportGenerator</code> class that conforms to the <code>CanGenerateReport</code> protocol and write the implementation ( Open/Closed principle ) . Then change the dependency for the <code>generateReport</code> method to an instance of <code>XMLReportGenerator</code> class ( Dependency Inversion principle).<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">XMLReportGenerator</span>: <span class="title">CanGenerateReport</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(data: [String])</span></span> &#123;</div><div class="line">        <span class="comment">//Generate the report in XML format</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> manager = <span class="type">ReportManager</span>([<span class="string">"Apple Watch"</span>,<span class="string">"Apple iPhone"</span>]);</div><div class="line">manager.generateReport(<span class="type">XMLReportGenerator</span>()); <span class="comment">//Generates report in XML format</span></div></pre></td></tr></table></figure></p>
<p>If you give it a thought it really makes sense, why should the ReportManager class worry about generating an Excel / PDF / HTML report, all that it cares is that it should have an instance that it can use to generate a report. It shouldn’t really worry about the lower level implementation details.</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/Concurrency-in-Swift/" class="prev">PREV</a><a href="/2016/Parsing-XML-in-iOS-using-NSXMLParser/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://rajabishek.com">Raj Abishek</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-93252193-1",'auto');ga('send','pageview');</script></body></html>