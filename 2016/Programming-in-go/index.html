<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script src="https://use.typekit.net/xbr6agj.js"></script><script>try{Typekit.load({ async: true });}catch(e){}</script><script>window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = '6WVGW';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[`;`]*`[`;`]*`[`;`]*`')){
d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+
';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};
})(window,document,window['_fs_namespace'],'script','user');
</script><title> Programming in Go · Raj Abishek</title><meta name="description" content="Programming in Go - Raj Abishek"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/logo.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">Blog</a></li><li class="nav-list-item"><a href="https://dribbble.com/rajabishek" target="_blank" class="nav-list-link">Dribbble</a></li><li class="nav-list-item"><a href="https://in.linkedin.com/in/rajabishek" target="_blank" class="nav-list-link">LinkedIn</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">Rss</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Programming in Go</h1><div class="post-info">Oct 29, 2016</div><div class="post-content"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Go is an open source programming language that makes it easy to build simple, reliable, and efficient software. It is widely available on a number of platforms and has a robust well documented common library and focuses on good software engineering principles.</p>
<a id="more"></a>
<p>Go was created in 2007 at Google by <strong>Robert Griesemer</strong>, <strong>Rob Pike</strong>, and <strong>Ken Thompson</strong> as an experimental project. Go combines the development speed of working in a dynamic language like Python with the performance and safety of a compiled language like C or C++.</p>
<h2 id="Go-toolset"><a href="#Go-toolset" class="headerlink" title="Go toolset"></a>Go toolset</h2><p>We need to install the Go toolset before we begin working in Go. Before installing the Go toolset lets do some preparation work. The Go toolset uses an environment variable called <code>GOPATH</code> to find the Go source code. We can set the <code>GOPATH</code> to anything we want, but to make things a little bit easier let set it to our home directory. If you are on a mac open the terminal and enter the following.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">'export GOPATH=$HOME\n'</span> &gt;&gt; ~/.zshrc</div></pre></td></tr></table></figure></p>
<p>Close the terminal, reopen it and enter <code>env</code> to the list of environment variables. You should see an entry for <code>GOPATH</code>. Now head over to the official <a href="golang.org/dl">downloads</a> page and run the installer for your platform. To confirm the installation run <code>go version</code> from the command line. The Go toolset is made up of several different commands and subcommands. You can pull up a list of those commands by <code>go help</code>.</p>
<p>Mac users can also install Go from the command line using homebrew by running <code>brew install go</code>. I have personally installed Go in my machine through homebrew as it will easily allow me to upgrade to a newer version by just running <code>brew upgrade go</code>.</p>
<h2 id="First-program"><a href="#First-program" class="headerlink" title="First program"></a>First program</h2><p>Lets write the typical first hello world program in Go.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(<span class="string">"Hello world from Raj Abishek"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>You can save the code in a file called <code>code.go</code> and then we can execute the file by running <code>go run code.go</code>. Ok, I see no compiled binary then is Go an interpreted language ? No, the <code>go run</code> command takes the subsequent files (separated by spaces), compiles them into an executable saved in a temporary directory, and then runs the program. Its like Javascript, every time we run the program the code is compiled.</p>
<p>If you had made some mistake somewhere while typing the program, the compiler will give you hints about where the mistake lies. Like most compilers, the Go compiler is extremely scrupulous and does not tolerate any mistakes.</p>
<h2 id="Understanding-Hello-world"><a href="#Understanding-Hello-world" class="headerlink" title="Understanding Hello world"></a>Understanding Hello world</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(<span class="string">"Hello world from Raj Abishek"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The <code>package main</code> at the top is a package declaration. Packages are Go’s way of organizing and reusing code. For now, just make sure to include this line in any program you write.</p>
<p>Go doesn’t care about whitespace. We use whitespaces to make programs more readable. The <code>import &quot;fmt&quot;</code> imports the <code>fmt</code> package(short for format). The import keyword is how we include code from other packages to use with our program. The <code>fmt</code> package implements formatting for input and output. The <code>fmt</code> package’s files would contain <code>package fmt</code> at the top of them.</p>
<p>It is important to remember here that when we import a package we always provide a string literal. Notice that <code>fmt</code> is surrounded by double quotes. Anything surrounded in double quotes is known as a string literal, which is a type of expression.</p>
<p>We define functions in Go with the <code>func</code> keyword followed by the name of the function(main, in this case), a list of zero or more parameters surrounded by parentheses, an optional return type, and a body which is surrounded by curly braces. The main function we defined above has no parameters, doesn’t return anything, and has only one statement.</p>
<p>We had to name the function as <code>main</code> because that is the first function that gets called when you execute the Go program. To print the contents out to the console we do <code>fmt.Println(&quot;Output to console&quot;)</code>. We are accessing the Println function inside the fmt package and invoking it using one string argument.</p>
<p>To find documentation details about a specific function in a package run the command <code>godoc &lt;package-name&gt; &lt;function-name&gt;</code>. If we deliberately read out the program that we just wrote out loud, it would go like this.</p>
<blockquote>
<p>Create a new Go program that references the fmt library and contains one function called main. That function takes no arguments and doesn’t return anything. It accesses the Println function from the fmt package and invokes it using one string argument.</p>
</blockquote>
<h2 id="Data-Types"><a href="#Data-Types" class="headerlink" title="Data Types"></a>Data Types</h2><p>Go is a statically typed programming language. Variables always have a specific type and that type cannot change. In every programming language you need some way to represent numbers(integers and floating point numbers), strings or characters, and booleans. Lets see how Go deals with these type of data.</p>
<h3 id="Integers"><a href="#Integers" class="headerlink" title="Integers"></a>Integers</h3><p>Generally, we split numbers into two different kinds integers and floating-point numbers. Go’s integer types are <code>uint8</code>, <code>uint16</code>, <code>uint32</code>, <code>uint64</code>, <code>int8</code>, <code>int16</code>, <code>int32</code>, and <code>int64</code>. The number at the end of each type tells us how many bits each of the types use. uint means <strong>unsigned integer</strong> while int means <strong>signed integer</strong>. In addition, there two alias types <code>byte</code>(which is the same as <code>uint8</code>) and <code>rune</code>(which is the same as <code>int32</code>).</p>
<p>There are also three machine dependent integer types <code>uint</code>, <code>int</code>, and <code>uintptr</code>. They are machine dependent because their size depends on the type of architecture you are using. Generally, if you are working with integers, you should just use the <code>int</code> datatype type.</p>
<h2 id="Floating-point-numbers"><a href="#Floating-point-numbers" class="headerlink" title="Floating point numbers"></a>Floating point numbers</h2><p>Floating-point numbers are numbers that contain a decimal component. Go has two floating point types <code>float32</code> and <code>float64</code> (also often referred to as single precision and double precision, respectively). Generally, we should stick with <code>float64</code> when working with floating point numbers.</p>
<p>Go also has two additional types for representing complex numbers(numbers with imaginary parts) <code>complex64</code> and <code>complex128</code>.</p>
<h2 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h2><p>A string is a sequence of characters with a definite length used to represent textual data. String literals can be created using double quotes <code>&quot;Raj Abishek&quot;</code> or backticks <code>Raj Abishek</code>. The difference between these is that double quoted version cannot contain newlines but they allow special escape sequences to be used like <code>\n</code> for new line and <code>\t</code> for a tab.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(<span class="built_in">len</span>(<span class="string">"Raj Abishek"</span>)) <span class="comment">// gets the length of the string</span></div><div class="line">    fmt.Println(<span class="string">"Raj Abishek"</span>[<span class="number">0</span>]) <span class="comment">// accesses the first character in the string</span></div><div class="line">    fmt.Println(<span class="string">"Raj "</span> + <span class="string">"Abishek"</span>) <span class="comment">// concatenates the two strings together</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Notice that in the output for the second print statement you see <code>82</code> instead of <code>R</code>. This is because the character is represented by a byte in Go (byte is an integer).</p>
<h2 id="Booleans"><a href="#Booleans" class="headerlink" title="Booleans"></a>Booleans</h2><p>A boolean value is a special 1-bit integer type used to represent <code>true</code> and <code>false</code> (or on and off). Three logical operators are used with boolean values <code>&amp;&amp;</code>, <code>||</code> and <code>!</code> which currespond to the boolean operation <code>AND</code>, <code>OR</code> and <code>NEGATION</code> respectively.</p>
<h2 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h2><p>A variable is a storage location, with a specific type and an associated name. Variables in Go are created by first using the var keyword, then specifying the variable name(message) and the type(string), and finally, assigning a literal value to the variable. A var statement can be at package or function level.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> i, j <span class="keyword">int</span> = <span class="number">1</span>, <span class="number">2</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> message <span class="keyword">string</span> = <span class="string">"Hello world from Raj Abishek"</span></div><div class="line">    fmt.Println(message)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Assigning a value is optional. As shown below we can split into two statements, one that declares the variable and another that assigns a value. Variables can change their value throughout the lifetime of a program.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> message <span class="keyword">string</span> <span class="comment">//Declare a variable called message that can hold string values</span></div><div class="line">    message = <span class="string">"Hello world"</span> <span class="comment">//Assigns a value to the message variable</span></div><div class="line">    fmt.Println(message)</div><div class="line"></div><div class="line">    message = message + <span class="string">" from Raj Abishek"</span> <span class="comment">//Re assign a new value to the message variable</span></div><div class="line">    fmt.Println(message)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Because creating a new variable with a starting value is so common, Go also supports a shorter statement.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">message := <span class="string">"Raj Abishek"</span></div><div class="line">age, name, isActive := <span class="number">20</span>, <span class="string">"Raj Abishek"</span>, <span class="literal">true</span></div></pre></td></tr></table></figure></p>
<p><code>:</code> is required before the <code>=</code>, this is how Go compiler knows that this is a variable declaration and not an assignment expression. Also observe that no type was specified, the type is not necessary because the Go compiler can infer the type based on the literal value you assign the variable.</p>
<p>Because we are assigning a string literal, message is given the type string. This is called as type inference. This is present in many other modern programming languages like Scala, Swift also. The compiler can also do type inference with the var statement:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">message := <span class="string">"Raj Abishek"</span> <span class="comment">//message is infered as a string</span></div><div class="line">integer := <span class="number">42</span> <span class="comment">//integer is infered as an int</span></div><div class="line">floating := <span class="number">3.142</span> <span class="comment">//floating is infered as a float64</span></div><div class="line"><span class="built_in">complex</span> := <span class="number">0.867</span> + <span class="number">0.5i</span> <span class="comment">// complex is infered as a complex128</span></div></pre></td></tr></table></figure></p>
<p>Generally you should use the <code>:=</code> shorter form whenever possible since as it is seen as the idiomatic usage of the language. It is important to remember that type inference will work only if you provide an initial value, because the only way for the compiler to infer the data type in from the initial value. The following Go code is invalid an will not compile.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> message</div></pre></td></tr></table></figure></p>
<p>Variable names must start with a letter and may contain letters, numbers, or the underscore symbol. camelCase is the preferred way to name the variables in Go.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">name := <span class="string">"Raj Abishek"</span></div><div class="line">fmt.Println(<span class="string">"My name is"</span>, name)</div></pre></td></tr></table></figure></p>
<h2 id="Zero-Values"><a href="#Zero-Values" class="headerlink" title="Zero Values"></a>Zero Values</h2><p>Variables declared without an explicit initial value are given their zero value. The zero value is <code>0</code> for numeric types, <code>false</code> for the boolean type, and <code>&quot;&quot;</code>(the empty string) for strings.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="keyword">var</span> integer <span class="keyword">int</span></div><div class="line">	<span class="keyword">var</span> floating <span class="keyword">float64</span></div><div class="line">	<span class="keyword">var</span> boolean <span class="keyword">bool</span></div><div class="line">	<span class="keyword">var</span> text <span class="keyword">string</span></div><div class="line">	fmt.Println(integer, floating, boolean, text)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Constants"><a href="#Constants" class="headerlink" title="Constants"></a>Constants</h2><p>Constants are essentially variables whose values cannot be changed later. You use the <code>const</code> keyword instead of the <code>var</code> keyword for creating them.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">const</span> name <span class="keyword">string</span> = <span class="string">"Raj Abishek"</span></div><div class="line">    fmt.Println(name)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>If you try to re assign a constant then it results in a compile time error. Constants are a good way to reuse common values in a program without writing out each time. For example, <code>Pi</code> in the <code>math</code> package is defined as a constant.</p>
<p>Go also has another shorthand when you need to define multiple variables. Use the keyword <code>var</code>(or <code>const</code>) followed by parentheses with each variable on its own line as shown below.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> (</div><div class="line">    name = <span class="string">"Raj Abishek"</span></div><div class="line">    message = <span class="string">"Hello world"</span></div><div class="line">    age = <span class="number">20</span></div><div class="line">)</div></pre></td></tr></table></figure></p>
<h2 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h2><p>The range of places where you are allowed to use a variable is called the scope of the variable. Like Java, C and C++, Go is <strong>lexically scoped using blocks</strong>. This means that the variable exists within the nearest curly braces ({}), or block, including any nested curly braces (blocks), but not outside of them.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line">message := <span class="string">"Hello world"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">  name := <span class="string">"Raj Abishek"</span></div><div class="line">  fmt.Println(name)</div><div class="line">  fmt.Println(message)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">another</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(message)</div><div class="line">    fmt.Println(name) <span class="comment">//This statement will result in a compile time error</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Iteration-amp-Loops"><a href="#Iteration-amp-Loops" class="headerlink" title="Iteration &amp; Loops"></a>Iteration &amp; Loops</h2><p>The for statement allows us to repeat a list of statements (a block) multiple times. The following is equivalent to while loops present in other programming languages.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    i := <span class="number">1</span></div><div class="line">    <span class="keyword">for</span> i &lt;= <span class="number">10</span> &#123;</div><div class="line">        fmt.Println(i)</div><div class="line">        i = i + <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The above code prints the numbers from 1 to 10 in ascending order. Other programming languages have a lot of different types of loops (while, do, until, foreach, …) but Go only has one that can be used in a variety of different ways. The previous program could also have been written like this. This is equivalent to the for loop present in other languages.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i&lt;=<span class="number">10</span>; i++ &#123;</div><div class="line">        fmt.Println(i)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The init and post statement are optional as shown below.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    sum := <span class="number">1</span></div><div class="line">    <span class="keyword">for</span> ; sum &lt; <span class="number">1000</span>; &#123;</div><div class="line">		    sum += sum</div><div class="line">	  &#125;</div><div class="line">    fmt.Println(sum)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>If you omit the loop condition it loops forever, so an infinite loop is compactly expressed.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">for</span> &#123;</div><div class="line">        <span class="comment">//infinite loop</span></div><div class="line">	  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="The-if-statement"><a href="#The-if-statement" class="headerlink" title="The if statement"></a>The if statement</h2><p>We can choose to do different things based on a condition. For that, we use the if statement. The else part is optional like in other programming languages. If the condition in the if evaluates to true, then the block after the condition is run; otherwise, either the block is skipped, or if the else block is present then that block is run.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> &#123;</div><div class="line">    <span class="comment">// even</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// odd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The if statement can start with a <strong>short statement</strong> to execute before the condition. Variables declared by the statement are only in scope until the end of the if.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getGreetingMessage</span><span class="params">(fullname <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</div><div class="line">    <span class="keyword">if</span> firstName := strings.Split(fullname, <span class="string">" "</span>)[<span class="number">0</span>]; firstName == <span class="string">"Raj"</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Hello world from "</span> + firstName</div><div class="line">	  &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Another hello world from "</span> + firstName</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// return firstName - this will result in a compile time error</span></div><div class="line">	  <span class="keyword">return</span> <span class="string">"Hello world"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    message := getGreetingMessage(<span class="string">"Raj Abishek"</span>)</div><div class="line">    fmt.Println(message)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As you can see above the <code>firstName</code> variable is only available inside of the if statement. If statements can also have else if parts as shown below. As you can see above variables declared inside an if short statement are also available inside any of the else blocks.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> &#123;</div><div class="line">    <span class="comment">// divisible by 2</span></div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> i % <span class="number">3</span> == <span class="number">0</span> &#123;</div><div class="line">    <span class="comment">// divisible by 3</span></div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> i % <span class="number">4</span> == <span class="number">0</span> &#123;</div><div class="line">    <span class="comment">// divisible by 4</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Like in other languages the conditions are checked top down and the first one to result in true will have its associated block executed and none of the other blocks will execute. A sample program to print only the even number from 1 to 10 is shown below.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</div><div class="line">        <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> &#123;</div><div class="line">            fmt.Println(i, <span class="string">" "</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Switch-statement"><a href="#Switch-statement" class="headerlink" title="Switch statement"></a>Switch statement</h2><p>To write a program that printed the English names for numbers from 1 to 5 if we used if statements then we would have a clumsy code. We would have a lot of else if statements and the program would like hard to maintain and make it is less readable. Instead we could use the switch statement in Go. We would write the program like this:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">switch</span> i &#123;</div><div class="line">    <span class="keyword">case</span> <span class="number">0</span>: fmt.Println(<span class="string">"Zero"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="number">1</span>: fmt.Println(<span class="string">"One"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="number">2</span>: fmt.Println(<span class="string">"Two"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="number">3</span>: fmt.Println(<span class="string">"Three"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="number">4</span>: fmt.Println(<span class="string">"Four"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="number">5</span>: fmt.Println(<span class="string">"Five"</span>)</div><div class="line">    <span class="keyword">default</span>: fmt.Println(<span class="string">"Unknown Number"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Like an if statement, each case is checked top down and the first one to succeed is chosen. A switch also supports a default case that will happen if none of the cases matches the value (similar to how the else works in an if statement). A case body breaks automatically, unless it ends with a <code>fallthrough</code> statement. A switch statement can also start with a short statement to execute before the condition.</p>
<h2 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h2><p>An array is a ordered sequence of items of a single type with a fixed length.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> data [<span class="number">5</span>]<span class="keyword">int</span> <span class="comment">//declares an array called data of 5 integers</span></div><div class="line">    data[<span class="number">4</span>] = <span class="number">100</span></div><div class="line">    fmt.Println(data)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>You should see the output <code>[0 0 0 0 100]</code>. Array elements can be accessed using their indexes. The index starts from zero. To access the nth element we use <code>data[n-1]</code>. A sample program to get the average of the elements of an integer array is shown below.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> data [<span class="number">4</span>]<span class="keyword">float64</span></div><div class="line">    data[<span class="number">0</span>] = <span class="number">10</span></div><div class="line">    data[<span class="number">1</span>] = <span class="number">20</span></div><div class="line">    data[<span class="number">2</span>] = <span class="number">30</span></div><div class="line">    data[<span class="number">3</span>] = <span class="number">40</span></div><div class="line">    <span class="keyword">var</span> total <span class="keyword">float64</span> = <span class="number">0</span> <span class="comment">//Or we could do total := 0.0</span></div><div class="line">    length := <span class="built_in">len</span>(data)</div><div class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i &lt; length; i++ &#123;</div><div class="line">            total += data[i] <span class="comment">//#1</span></div><div class="line">    &#125;</div><div class="line">    fmt.Println(total / <span class="keyword">float64</span>(length)) <span class="comment">//#2</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>There are some important observations to make in the above code. Firstly we did not declare the variable using shorthand <code>total := 0</code> in the above code because then <code>total</code> would have inferred to be of the type <code>int</code>. Since we want total to be of type <code>float64</code> so that we can add the <code>data[i]</code> while totaling and divide by <code>float64(length)</code> while computing the average, we explicitly mentioned its type as <code>float64</code> using the var statement. If we wrote the code as <code>total := 0</code> then  we would get compile time error due to line 1 and line 2 due to mismatched types <code>int</code> and <code>float64</code>.</p>
<p>But what we can do is <code>total := 0.0</code>. In this way the Go compiler would infer the type of total as <code>float64</code> since <code>0.0</code> literal is seen as a double precision value. Next we have the <code>len</code> function that returns the length of the array as an <code>int</code>. But since <code>total</code> is of type <code>float64</code> we cannot directly divide by <code>length</code>. Go doesn’t allow us to operate between two mismatching data types. We need to convert length into a <code>float64</code> which is done by <code>float64(length)</code>. This is called as type conversion. Unlike in C, in Go assignment between items of different type requires an explicit conversion. In general, to convert between types, you use the type name like a function. The expression <code>T(v)</code> converts the value <code>v</code> to the type <code>T</code>.</p>
<p>We can also use a special form of a for loop with array in Go.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">total := <span class="number">0.0</span></div><div class="line"><span class="keyword">for</span> i, value := <span class="keyword">range</span> data &#123;</div><div class="line">    total += value</div><div class="line">&#125;</div><div class="line">fmt.Println(total / <span class="keyword">float64</span>(<span class="built_in">len</span>(data)))</div></pre></td></tr></table></figure></p>
<p>As you can see above with this variation of the loop <code>i</code> and <code>value</code> represents the index and the value of each iteration. At every iteration <code>i</code> is the index and <code>value</code> in data[index]. We use the keyword <code>range</code> followed by the name of the variable we want to loop over. But when we compile the above program and run it will result in a compile time error because Go doesn’t allow us to create variables that we never use. The <code>i</code> was never used inside of the for loop and therefore we have to replace it with a single underscore to tell the compiler that we don’t need this. The modified program would be:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">total := <span class="number">0.0</span></div><div class="line"><span class="keyword">for</span> _, value := <span class="keyword">range</span> data &#123;</div><div class="line">    total += value</div><div class="line">&#125;</div><div class="line">fmt.Println(total / <span class="keyword">float64</span>(<span class="built_in">len</span>(data)))</div></pre></td></tr></table></figure></p>
<p>If you only want the index, drop the “, value” entirely.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> index := <span class="keyword">range</span> data &#123;</div><div class="line">    fmt.Println(<span class="string">"The index is: "</span>, index)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As we had a shorthand syntax to create variables with initial values, we can also in a similar way create array variables with initial values.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">data := [<span class="number">4</span>]<span class="keyword">float64</span>&#123; <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span> &#125;</div><div class="line">collection := [<span class="number">4</span>]<span class="keyword">float64</span> &#123;</div><div class="line">    <span class="number">100</span>,</div><div class="line">    <span class="number">200</span>,</div><div class="line">    <span class="number">300</span>,</div><div class="line">    <span class="number">400</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As you can see above we need not force the declaration on a single line. We can break up into multiple line however the extra trailing <code>,</code> after 400 is required by Go. It allows us to easily remove an element from the array by commenting out the line.</p>
<p>As you can see above while declaring the array we have to hardcode the length of the array. An array’s length is part of its type, so arrays cannot be resized. Because of this and other limitations, you rarely see arrays used directly in Go code. Instead we usually use something called as a slice, which is data type build on top of an array.</p>
<h2 id="Slices"><a href="#Slices" class="headerlink" title="Slices"></a>Slices</h2><p>A slice is a segment of an array. Like arrays, slices are indexable and have a length. Unlike arrays, this length is allowed to change. We declare a slice as follows. We do not put the length or the number of elements inside the square brackets. The type <code>[]T</code> is a slice with elements of type <code>T</code>. Whenever we create a slice internally first the underlying array is created and then Go builds a slice that references it.</p>
<p>A slice has both a <strong>length</strong> and a <strong>capacity</strong>. The length of a slice is the number of elements it contains. The capacity of a slice is the number of elements in the underlying array, counting from the first element in the slice. The length and capacity of a slice <code>s</code> can be obtained using the expressions <code>len(s)</code> and <code>cap(s)</code>. The zero value of a slice is nil. A nil slice has a length and capacity of 0 and has no underlying array.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> data []<span class="keyword">float64</span></div></pre></td></tr></table></figure></p>
<p>As you can see above we have created a slice called data with a length of zero. To create a size with a length we use the built in make function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data := <span class="built_in">make</span>([]<span class="keyword">float64</span>, <span class="number">5</span>)</div></pre></td></tr></table></figure></p>
<p>As you can see above we have created a slice that is associated with an underlying <code>float64</code> array of length <code>5</code>. Slices are always associated with some array, and although they can never be longer than the array, they can be smaller. The make function also allows a third parameter that represents the capacity of the underlying array that the slice points to.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data := <span class="built_in">make</span>([]<span class="keyword">float64</span>, <span class="number">5</span>, <span class="number">10</span>)</div></pre></td></tr></table></figure></p>
<p>In the above code we have create a slice of length <code>5</code> that is associated with an underlying <code>float64</code> array of length <code>10</code>. Another way to create slices is to use the <code>[low:high]</code> expression from an existing array. The <code>low</code> is the index of where to start the slice and <code>high</code> is the index of where to end it(but not including the index itself). It is similar to slicing sequences in Python except that we don’t have negative indexing here.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">array := [<span class="number">5</span>]<span class="keyword">float64</span>&#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;</div><div class="line">slice := array[<span class="number">0</span>:<span class="number">5</span>]</div></pre></td></tr></table></figure></p>
<p>When we do <code>array[0:5]</code> returns <code>[1, 2, 3, 4, 5]</code>, <code>array[1:4]</code> returns <code>[2, 3, 4]</code>. For convenience, we are also allowed to omit low, high, or even both low and high. <code>array[0:]</code> is the same as <code>array[0:len(array)]</code>, <code>array[:n]</code> is the same as <code>array[0:n]</code>, and <code>array[:]</code> is the same as <code>array[0:len(arr)]</code>.</p>
<p>A slice does not store any data, it just describes a section of an underlying array. Changing the elements of a slice modifies the corresponding elements of its underlying array. Other slices that share the same underlying array will see those changes.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    names := [<span class="number">4</span>]<span class="keyword">string</span>&#123;</div><div class="line">		    <span class="string">"Raj"</span>,</div><div class="line">		    <span class="string">"Sailesh"</span>,</div><div class="line">		    <span class="string">"Dev"</span>,</div><div class="line">		    <span class="string">"Kani"</span>,</div><div class="line">	  &#125;</div><div class="line">    fmt.Println(names) <span class="comment">//[Raj Sailesh Dev Kani]</span></div><div class="line">    a := names[<span class="number">0</span>:<span class="number">2</span>]</div><div class="line">    b := names[<span class="number">1</span>:<span class="number">3</span>]</div><div class="line">    fmt.Println(a, b) <span class="comment">//[Raj Sailesh Sailesh Dev]</span></div><div class="line"></div><div class="line">    b[<span class="number">0</span>] = <span class="string">"new"</span></div><div class="line">    fmt.Println(a, b) <span class="comment">//[Raj new new Dev]</span></div><div class="line">    fmt.Println(names) <span class="comment">//[Raj new Dev Kani]</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>In addition to indexing Go includes two built in functions to assist with slices: <code>append</code> and <code>copy</code>. To append elements to the end of slice we use the <code>append</code> function. If there is space in the underlying array the element is added after the last element and the length of the slice is incremented. If there is no space in the underlying array then a new array is created and the existing elements are copied over to the new array, the new element is added to the end and then the new slice is returned.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    slice1 := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125; <span class="comment">//shorthand form to create a new slice from initial values</span></div><div class="line">    slice2 := <span class="built_in">append</span>(slice1, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line">    fmt.Println(slice1, slice2)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As you can see from the above code if you omit the length of the elements inside the square bracket that is the shorthand from for creating a new slice with initial values. <code>slice1</code> has <code>[1, 2, 3]</code> and <code>slice2</code> has <code>[1, 2, 3, 4, 5]</code>. The <code>append</code> function creates a new slice by taking an existing slice(the first argument) and appending all the following arguments to it.</p>
<p>The <code>copy</code> function in Go takes two arguments <code>dst</code> and <code>src</code>. All of the entries in <code>src</code> are copied into <code>dst</code> overwriting whatever is there. If the lengths of the two slices are not the same, the smaller of the two will be used.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    slice1 := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</div><div class="line">    slice2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">2</span>)</div><div class="line">    <span class="built_in">copy</span>(slice2, slice1)</div><div class="line">    fmt.Println(slice1, slice2)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>On running the above program <code>slice1</code> has <code>[1, 2, 3]</code> and <code>slice2</code> has <code>[1, 2]</code>. The contents of <code>slice1</code> are copied into <code>slice2</code>, but because <code>slice2</code> has room for only two elements, only the first two elements of <code>slice1</code> are copied.</p>
<h2 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h2><p>A map is an unordered collection of key value pairs (maps are also sometimes called associative arrays, hash tables, or dictionaries). Maps are used to look up a value by its associated key. Here’s an example of a map in Go. To create a map in Go we have to provide the datatype of both the key and the value.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> data <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></div></pre></td></tr></table></figure></p>
<p>The above code create a map with the type of keys as <code>string</code> and the type of values as <code>int</code>. Maps have to be initialized before they are used in the program, or else we would get a run time error, because the zero value of a map is <code>nil</code>. A nil map has no keys, nor can keys be added. The <code>make</code> function returns a map of the given type, initialized and ready for use.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">data := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</div><div class="line">data[<span class="string">"key"</span>] = <span class="number">10</span> <span class="comment">// This is how we insert or update an element in map</span></div><div class="line">fmt.Println(data[<span class="string">"key"</span>])</div></pre></td></tr></table></figure></p>
<p>The length of a map(found by doing len(data)) can change as we add new items to it. We can use the <code>delete</code> function to delete items from a map.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">delete</span>(data, <span class="string">"key"</span>)</div></pre></td></tr></table></figure></p>
<p>Suppose we tried to look up an element that doesn’t exist then a map returns the zero value for the value type(which for strings is the empty string). The zero value for integer type is 0. Although we could check for the zero value in a condition (data[“jsjsjs”] == 0), Go provides a better way.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">number, ok := data[<span class="string">"jsjsjs"</span>]</div><div class="line">fmt.Println(number, ok)</div></pre></td></tr></table></figure></p>
<p>The first value is the result of the lookup, the second tells us whether or not the lookup was successful. Here since we have no key called <code>jsjsjs</code> <code>number</code> will be zero and <code>ok</code> will be false. In Go programs we would often see code like this.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> number, ok := data[<span class="string">"jsjsjs"</span>]; ok &#123;</div><div class="line">    fmt.Println(number, ok)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>We try to get the value from the map, if successful then we execute the code block. The shorthand form to create map in Go is like this.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">numbers := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>&#123;</div><div class="line">    <span class="number">1</span>: <span class="string">"One"</span>,</div><div class="line">    <span class="number">2</span>: <span class="string">"Two"</span>,</div><div class="line">    <span class="number">3</span>: <span class="string">"Three"</span>,</div><div class="line">    <span class="number">4</span>: <span class="string">"Four"</span>,</div><div class="line">    <span class="number">5</span>:  <span class="string">"Five"</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Go supports nesting of maps as well. To nest maps we could do the following.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    data := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</div><div class="line">        <span class="string">"13bce1106"</span>: <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</div><div class="line">            <span class="string">"name"</span>:<span class="string">"Raj Abishek"</span>,</div><div class="line">            <span class="string">"state"</span>:<span class="string">"Tamil Nadu"</span>,</div><div class="line">        &#125;,</div><div class="line">        <span class="string">"13bce1118"</span>: <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</div><div class="line">            <span class="string">"name"</span>:<span class="string">"Sailesh Dev"</span>,</div><div class="line">            <span class="string">"state"</span>:<span class="string">"Tamil Nadu"</span>,</div><div class="line">        &#125;,</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> student, ok := data[<span class="string">"13bce1106"</span>]; ok &#123;</div><div class="line">        fmt.Println(student[<span class="string">"name"</span>], student[<span class="string">"state"</span>])</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><p>Function definition starts with the <code>func</code> keyword, followed by the function’s name followed by the parameters followed by the return type. Collectively, the parameters and the return type are known as the function’s signature. The following code defines a function called average that takes takes in a slice of type <code>float64</code> and returns one <code>float64</code>.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">average</span><span class="params">(data []<span class="keyword">float64</span>)</span> <span class="title">float64</span></span> &#123;</div><div class="line">    total := <span class="number">0.0</span></div><div class="line">    <span class="keyword">for</span> _, value := <span class="keyword">range</span> data &#123;</div><div class="line">        total += value</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> total / <span class="keyword">float64</span>(<span class="built_in">len</span>(data))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    slice := []<span class="keyword">float64</span>&#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</div><div class="line">    fmt.Println(average(slice))</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>In Go we can also return multiple values from a function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getFullName</span><span class="params">()</span> <span class="params">(<span class="keyword">string</span>, <span class="keyword">string</span>)</span></span> &#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">"Raj"</span>, <span class="string">"Abishek"</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">  firstName, lastName := getFullName()</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Multiple value returning functions are commonly used in code to return the error value along with the result, or sometimes a boolean value to indicate the success of the operation.</p>
<p>Go’s return values may be named. If so, they are treated as variables defined at the top of the function. These names should be used to document the meaning of the return values. A return statement without arguments returns the named return values. This is known as a <strong>naked return</strong>. Naked return statements should be used only in short functions, as with the example shown here. They can harm readability in longer functions.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">split</span><span class="params">(sum <span class="keyword">int</span>)</span> <span class="params">(x, y <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">  <span class="comment">//as though x and y variables are declared here</span></div><div class="line">	x = sum * <span class="number">4</span> / <span class="number">9</span></div><div class="line">	y = sum - x</div><div class="line">	<span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	fmt.Println(split(<span class="number">17</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As you can see above <code>x</code> and <code>y</code> are treated as variables that we defined at the start of the <code>split</code> function. When we do <code>return</code> Go returns the named return values, it is as though we do <code>return x, y</code>.</p>
<h2 id="Defer"><a href="#Defer" class="headerlink" title="Defer"></a>Defer</h2><p>A defer statement defers the execution of a function until the surrounding function returns. The deferred call’s arguments are evaluated immediately, but the function call is not executed until the surrounding function returns. The following code gives hello world as the output.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">defer</span> fmt.Println(<span class="string">"world"</span>)</div><div class="line">	  fmt.Println(<span class="string">"hello"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Deferred function calls are pushed onto a stack. When a function returns, its deferred calls are executed in last-in-first-out order.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Print(<span class="string">"counting"</span>, <span class="string">" "</span>)</div><div class="line">	  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</div><div class="line">		    <span class="keyword">defer</span> fmt.Print(i, <span class="string">" "</span>)</div><div class="line">	  &#125;</div><div class="line">    fmt.Print(<span class="string">"done"</span>, <span class="string">" "</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The above code will produce the output <code>counting done 10 9 8 7 6 5 4 3 2 1</code>.</p>
<h2 id="Variadic-Parameters"><a href="#Variadic-Parameters" class="headerlink" title="Variadic Parameters"></a>Variadic Parameters</h2><p>The last parameter of a function in Go can be a variadic parameter.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(args ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">    total := <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> args &#123;</div><div class="line">        total += v</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> total</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As you can see in the above code the args parameter is a variadic parameter meaning while calling the functions we can pass multiple arguments zero or more to the <code>add</code> function and all of those will be available in the <code>args</code> array. The <code>...</code> called as ellips is used before the type name of the last parameter to identify it as a variadic parameter.</p>
<p>Do you remember the <code>Println</code> function from the <code>fmt</code> package we can pass any number of variable to output the values right, internally it uses a variadic parameter. The <code>Println</code> function takes any number of values of any type(the special interface{} type). This is precisely how the fmt.Println function is implemented.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Println</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></div></pre></td></tr></table></figure></p>
<p>We can also pass a slice followed by ellipsis while calling a function with a variadic parameter as shown below.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    data := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</div><div class="line">    fmt.Println(add(data...))</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Functions can also be defined recursively in Go. Here is one way to compute the factorial of a number.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">factorial</span><span class="params">(x <span class="keyword">uint</span>)</span> <span class="title">uint</span></span> &#123;</div><div class="line">    <span class="keyword">if</span> x== <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> x * factorial(x<span class="number">-1</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Closures"><a href="#Closures" class="headerlink" title="Closures"></a>Closures</h2><p>Functions are values too. They can be passed around just like other values. Function values may be used as function arguments and return values. Go functions may be closures.</p>
<p>A closure is a function value that references variables from outside its body. It can capture constants and variables from the surrounding context in which it is defined. The closure can then refer to and modify the values of those constants and variables from within its body, even if the original scope that defined the constants and variables no longer exists.</p>
<p>In Go, the simplest form of a closure that can capture values is a nested function, written within the body of another function. A nested function can capture any of its outer function’s arguments and can also capture any constants and variables defined within the outer function.</p>
<p>Here’s an example of a function called <code>makeIncrementer</code>, which contains a nested function called <code>incrementer</code>. The nested <code>incrementer</code> function captures two values, <code>runningTotal</code> and <code>amount</code>, from its surrounding context. After capturing these values, <code>incrementer</code> is returned by <code>makeIncrementer</code> as a closure that increments <code>runningTotal</code> by <code>amount</code> each time it is called.</p>
<p>As you can see below the <code>makeIncrementer</code> function returns a closure. Each closure is bound to its own <code>runningTotal</code> variable.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeIncrementer</span><span class="params">(amount <span class="keyword">int</span>)</span> <span class="title">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</div><div class="line">    runningTotal := <span class="number">0</span></div><div class="line">    incrementer := <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</div><div class="line">        runningTotal += amount</div><div class="line">        <span class="keyword">return</span> runningTotal</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> incrementer</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    incrementByTen := makeIncrementer(<span class="number">10</span>)</div><div class="line">    fmt.Println(incrementByTen()) <span class="comment">// returns a value of 10</span></div><div class="line">    fmt.Println(incrementByTen()) <span class="comment">// returns a value of 20</span></div><div class="line">    fmt.Println(incrementByTen()) <span class="comment">// returns a value of 30</span></div><div class="line"></div><div class="line">    incrementBySeven := makeIncrementer(<span class="number">7</span>)</div><div class="line">    fmt.Println(incrementBySeven()) <span class="comment">// returns a value of 7</span></div><div class="line"></div><div class="line">    fmt.Println(incrementByTen()) <span class="comment">// returns a value of 40</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The return type of <code>makeIncrementer</code> is <code>func() int</code>. This means that it returns a function, rather than a simple value. The function it returns has no parameters, and returns an <code>int</code> value each time it is called. When considered in isolation, the nested <code>incrementer</code> function might seem unusual.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">incrementer := <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</div><div class="line">    runningTotal += amount</div><div class="line">    <span class="keyword">return</span> runningTotal</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The <code>incrementer</code> function doesn’t have any parameters, and yet it refers to <code>runningTotal</code> and <code>amount</code> from within its function body. It does this by <strong>capturing a reference</strong> to <code>runningTotal</code> and <code>amount</code> from the surrounding function and using them within its own function body.</p>
<p>Capturing by reference ensures that <code>runningTotal</code> and <code>amount</code> do not disappear when the call to <code>makeIncrementer</code> ends, and also ensures that <code>runningTotal</code> is available the next time the <code>incrementer</code> function is called. Closure and recursion are powerful programming techniques that form the basis of a paradigm known as <strong>functional programming</strong>.</p>
<h2 id="Pointers"><a href="#Pointers" class="headerlink" title="Pointers"></a>Pointers</h2><p>When we pass a variable to a function it is passed by copy.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sample</span><span class="params">(a <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">    a = <span class="number">10</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    b := <span class="number">5</span></div><div class="line">    sample(b)</div><div class="line">    fmt.Println(b) <span class="comment">// b is still 5</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As we can see above even though the sample function will not modify the original b variable in the main function. But what if we wanted to ? One way to accomplish this is through pointers. A pointer holds the memory address of a variable. The type <code>*T</code> is a pointer to a <code>T</code> value. Its zero value is <code>nil</code>. The statement <code>var pointer *int</code> declares an integer pointer will <code>nil</code> value. The <code>&amp;</code> operator generates a pointer to its operand.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> pointer *<span class="keyword">int</span></div><div class="line">integer := <span class="number">42</span></div><div class="line">pointer = &amp;integer</div></pre></td></tr></table></figure></p>
<p>When we precede <code>&amp;</code> before a variable name we get the address of the variable in memory that we can store using a pointer. To give you a formal definition a <strong>pointer</strong> is a programming object that refers to (or “points to”) another value stored elsewhere in the computer memory using its memory address. A pointer references a location in memory. Thus what a pointer actually stores is an address of a memory location. Obtaining the value stored at that location is known as <strong>dereferencing</strong> or <strong>indirecting</strong> the pointer. Unlike C, Go has no pointer arithmetic.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="comment">//(a *int, b *int) is the same as (a, b *int)</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a, b *<span class="keyword">int</span>)</span></span> &#123;</div><div class="line">  temp := *a</div><div class="line">  *a = *b</div><div class="line">  *b = temp</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    a := <span class="number">5</span></div><div class="line">    b := <span class="number">10</span></div><div class="line">    swap(&amp;a, &amp;b)</div><div class="line">    fmt.Println(a, b) <span class="comment">// a is 10 and b is 5</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>In Go when two or more consecutive named function parameters share a type, you can omit the type from all but the last as shown above. Pointers reference a location in memory where a value is stored rather than the value itself. By using a pointer <code>*int</code> the swap function is able to modify the original variables.</p>
<p>In Go, a pointer is represented using an asterisk followed by the type of the stored value <code>*type</code>. As you can see above we have two integer pointer in the <code>swap</code> function. An asterisk is also used to dereference pointer variables. Dereferencing a pointer gives us access to the value the pointer points to. We we did <code>temp := *a</code> we are saying store the value that the integer pointer a is pointing to in temp variable. We use the <code>&amp;</code> operator to find the address of a variable. <code>&amp;a</code> returns a <code>*int</code> (pointer to an int) because a is an <code>int</code>. <code>&amp;a</code> in main and <code>a</code> in <code>swap</code> refer to the same memory location.</p>
<p>The <code>new</code> built in function in Go also returns a pointer.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">setValue</span><span class="params">(pointer *<span class="keyword">int</span>, value <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">    *pointer = value</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    pointer := <span class="built_in">new</span>(<span class="keyword">int</span>)</div><div class="line">    setValue(pointer, <span class="number">10</span>)</div><div class="line">    fmt.Println(*pointer) <span class="comment">// Output is 1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As you can see from the above code the <code>new</code> built in function takes a type as an argument and allocates enough memory to fit a value of that type, and returns a pointer to it. We pass this pointer to the <code>setValue</code> function which dereferences the pointer to assign a value <code>10</code> to the memory location.</p>
<p>We don’t have to worry about deallocating memory in Go because like Java the Go programming language has a wonderful garbage collector in which memory is cleaned up automatically. Pointers are rarely used with Go’s built-in types, but they are extremely useful when paired with structs.</p>
<h2 id="Structs"><a href="#Structs" class="headerlink" title="Structs"></a>Structs</h2><p>A struct is a collection of fields.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</div><div class="line">    rollno <span class="keyword">string</span></div><div class="line">    name <span class="keyword">string</span></div><div class="line">    age <span class="keyword">int</span></div><div class="line">    marks <span class="keyword">float64</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>We are defining a new data type called <code>Student</code> which is a struct that encapsulates 4 fields. Fields are like a set of grouped variables. Each field has a name and a type and is stored adjacent to the other fields in the struct. Like with functions, we can collapse fields that have the same type:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</div><div class="line">    rollno, name <span class="keyword">string</span></div><div class="line">    age <span class="keyword">int</span></div><div class="line">    marks <span class="keyword">float64</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>We can create an instance of the <code>Student</code> in a variety of ways.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> s Student</div></pre></td></tr></table></figure></p>
<p>The statement above will create a local <code>Student</code> variable that is by default set to zero. The above statement allocates memory for the struct instance on the stack(where all local variables go). There is generally less memory available for the stack. If you allocate too many objects, there is a risk of stack overflow. For a struct, zero means each of the fields is set to their corresponding zero value (0 for ints, 0.0 for floats, “” for strings, nil for pointers, etc.).</p>
<p>We can also use the <code>new</code> function to dynamically allocate memory for the <code>Student</code> instance. This allocates memory for the object on the free store(also called as heap).<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s := <span class="built_in">new</span>(Student) <span class="comment">//s is of type *Student</span></div></pre></td></tr></table></figure></p>
<p>This allocates memory for all the fields, sets each of them to their zero value, and returns a pointer to the struct <code>*Student</code>.</p>
<p>Pointers are often used with structs so that functions can modify their contents. But typically this is not the way we instantiate a struct because we usually provide initial values for the fields in the struct.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s := Student&#123;rollno: <span class="string">"13bce1106"</span>, name: <span class="string">"Raj Abishek"</span>, age: <span class="number">20</span>, marks: <span class="number">70.4</span>&#125; <span class="comment">//s is of type Student</span></div></pre></td></tr></table></figure></p>
<p>We can leave off the field names and provide the values in the same order as we defined them.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s := Student&#123;<span class="string">"13bce1106"</span>, <span class="string">"Raj Abishek"</span>, <span class="number">20</span>, <span class="number">70.4</span>&#125; <span class="comment">//s is of type Student</span></div></pre></td></tr></table></figure></p>
<p>If we instead wanted to dynamically create a struct instance and initialize it at the same time then we can use the following method. We should use the <code>&amp;</code> operator as shown below.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s := &amp;Student&#123;<span class="string">"13bce1106"</span>, <span class="string">"Raj Abishek"</span>, <span class="number">20</span>, <span class="number">70.4</span>&#125; <span class="comment">//here s is of type *Student</span></div></pre></td></tr></table></figure></p>
<p>We can access the fields using the <code>.</code> operator as shown below.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">s := Student&#123;<span class="string">"13bce1106"</span>, <span class="string">"Raj Abishek"</span>, <span class="number">20</span>, <span class="number">70.4</span>&#125; <span class="comment">//s is of type Student</span></div><div class="line">p := &amp;s</div><div class="line">fmt.Println(s.rollno, s.number, s.age, s.marks)</div><div class="line">fmt.Println(p.rollno, p.number, p.age, p.marks)</div></pre></td></tr></table></figure></p>
<p>To access the field <code>X</code> of a struct when we have the struct pointer <code>p</code> we could write <code>(*p).X</code>. However, that notation is cumbersome, so the language permits us instead to write just <code>p.X</code> as shown above, without the explicit dereference.</p>
<h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><p>Go does not have classes. However, you can define methods on types. A method is a function with a special <strong>receiver argument</strong>. The receiver appears in its own argument list between the <code>func</code> keyword and the method name. The receiver is like a parameter, it has a name and a type but by creating the function in this way, it allows us to call the function using the <code>.</code> operator from an instance of the type.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> <span class="string">"strings"</span></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</div><div class="line">    rollno, name <span class="keyword">string</span></div><div class="line">    age <span class="keyword">int</span></div><div class="line">    marks <span class="keyword">float64</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Student)</span> <span class="title">getFirstName</span><span class="params">()</span> <span class="title">string</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> strings.Split(s.name, <span class="string">" "</span>)[<span class="number">0</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    s := Student&#123;<span class="string">"13bce1106"</span>, <span class="string">"Raj Abishek"</span>, <span class="number">20</span>, <span class="number">70.4</span>&#125;</div><div class="line">    fmt.Println(s.getFirstName())</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>As you can see above when we call <code>s.getFirstName()</code> from main we no longer need the &amp; operator (Go automatically knows to pass a pointer to the student for this method), and because this function can only be used with Students.</p>
<p>We can declare a method on non struct types too. You can only declare a method with a receiver whose type is defined in the same package as the method. You cannot declare a method with a receiver whose type is defined in another package (which includes the built in types such as <code>int</code>).<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">	<span class="string">"fmt"</span></div><div class="line">	<span class="string">"math"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">type</span> MyFloat <span class="keyword">float64</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f MyFloat)</span> <span class="title">Abs</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</div><div class="line">    <span class="keyword">if</span> f &lt; <span class="number">0</span> &#123;</div><div class="line">		    <span class="keyword">return</span> <span class="keyword">float64</span>(-f)</div><div class="line">	  &#125;</div><div class="line">	  <span class="keyword">return</span> <span class="keyword">float64</span>(f)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    f := MyFloat(-math.Sqrt2)</div><div class="line">	  fmt.Println(f.Abs())</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The output of the above program is <code>1.4142135623730951</code>. We have defined a type called <code>MyFloat</code> which is a <code>float64</code>. Since <code>MyFloat</code> is declared in this package we can declare a method called <code>Abs</code> that computes the absolute value of the number.</p>
<h2 id="Packages"><a href="#Packages" class="headerlink" title="Packages"></a>Packages</h2><p>Every Go program is made up of packages. Programs start running in package <code>main</code>. An important part of high-quality software is code reuse. Its is best to stick with the <em>Don’t Repeat Yourself</em> principle. As we saw earlier functions are one way in which we can reuse code. Packages provide another mechanism for reusing code.</p>
<p>If you remember in almost every program we included the fmt package using <code>import &quot;fmt&quot;</code>. By convention, the package name is the same as the last element of the import path. For instance, the <code>math/rand</code> package comprises files that begin with the statement <code>package rand</code>.</p>
<p><code>fmt</code> is the name of a package that includes a variety of functions related to formatting<br>and output to the screen. Bundling such related code and functions as a part of a package gives us the following benefits.</p>
<ul>
<li>Avoids overlapping names - keeping functions names short and succinct</li>
<li>Organizes code - Easier to find code for reuse</li>
<li>Speeds up compiler - Eg. every time we compiler the fmt package need not be compiled</li>
</ul>
<h2 id="Exported-Names"><a href="#Exported-Names" class="headerlink" title="Exported Names"></a>Exported Names</h2><p>In Go, a name is exported if it begins with a capital letter. For example, <code>Pizza</code> is an exported name, as is <code>Pi</code>, which is exported from the <code>math</code> package. <code>pizza</code> and <code>pi</code> do not start with a capital letter, so they are not exported. When importing a package, you can refer only to its exported names. Any unexported names are not accessible from outside the package.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">	<span class="string">"fmt"</span></div><div class="line">	<span class="string">"math"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">	fmt.Println(math.Pi)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The above program works because we have a exported name called <code>Pi</code> in the <code>math</code> package. If we had some programming object in the <code>math</code> package that starts with a lowercase then that will not be accessible from outside of the package.</p>
<h2 id="Strings-Package"><a href="#Strings-Package" class="headerlink" title="Strings Package"></a>Strings Package</h2><p>Instead of writing out everything from scratch it is better if we can interface with existing libraries. Lets look at some of the commonly used packages in the Go language.</p>
<p>Go includes a large number of functions to work with strings in the <code>strings</code> package. To search for a smaller string in a bigger string, use the Contains function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.Contains(<span class="string">"test"</span>, <span class="string">"es"</span>)) <span class="comment">//true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>Contains</code> function is <code>func Contains(s, substr string) bool</code>. The first parameter is the larger string, second is the string to search for and the function returns a boolean.</p>
<p>As you can see from the above code we can import multiple packages by placing the packages inside parenthesis. This is called as a <strong>factored import statement</strong>. It is good style to use the factored import statement over writing multiple import statements like.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="keyword">import</span> <span class="string">"strings"</span></div></pre></td></tr></table></figure></p>
<p>To count the number of times a smaller string occurs in a bigger string we use the <code>Count</code> function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.Count(<span class="string">"test"</span>, <span class="string">"t"</span>)) <span class="comment">//2</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>Count</code> function is <code>func Count(s, substr string) int</code>. The first parameter is the larger string, the second is the smaller string and the function returns the count as <code>int</code>. To determine if a bigger string starts with a smaller string, use the <code>HasPrefix</code> function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.HasPrefix(<span class="string">"test"</span>, <span class="string">"te"</span>)) <span class="comment">//true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>HasPrefix</code> function is <code>func HasPrefix(s, prefix string) bool</code>. The first string is the larger string, the second is the smaller string and the function returns a boolean. Similarly to determine if a bigger string ends with a smaller string, use the <code>HasSuffix</code> function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.HasSuffix(<span class="string">"test"</span>, <span class="string">"st"</span>)) <span class="comment">//true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>HasSuffix</code> function is <code>func HasSuffix(s, prefix string) bool</code>. The first string is the larger string, the second is the smaller string and the function returns a boolean. To find the position of a smaller string in a bigger string, use the <code>Index</code> function (it returns -1 if not found).<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// func Index(s, sep string) int</span></div><div class="line">    fmt.Println(strings.Index(<span class="string">"test"</span>, <span class="string">"s"</span>)) <span class="comment">//2</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>Index</code> function is <code>func Index(s, sep string) int</code>. The first string is the larger string, the second is the smaller string and the function returns a <code>int</code> the index of the smaller string in the larger string. To take a list of strings and join them together in a single string separated by another string (e.g., a comma), use the Join function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.Join([]<span class="keyword">string</span>&#123;<span class="string">"a"</span>,<span class="string">"b"</span>&#125;, <span class="string">"-"</span>)) <span class="comment">//"a-b"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>Join</code> function is <code>func Join(a []string, sep string) string</code>. To repeat a string, use the Repeat function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.Repeat(<span class="string">"a"</span>, <span class="number">5</span>)) <span class="comment">//"aaaaa"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>Repeat</code> function is <code>func Repeat(s string, count int) string</code>. To replace a smaller string in a bigger string with some other string, use the Replace function. In Go, Replace also takes a number indicating how many times to do the replacement (pass -1 to do it as many times as possible).<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.Replace(<span class="string">"aaaa"</span>, <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="number">2</span>)) <span class="comment">//"bbaa"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>Replace</code> function is <code>func Replace(s, old, new string, n int) string</code>. To split a string into a list of strings by a separating string (e.g., a comma), use the Split function (Split is the reverse of Join).<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.Split(<span class="string">"a-b-c-d-e"</span>, <span class="string">"-"</span>))) <span class="comment">//[]string&#123;"a","b","c","d","e"&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>Split</code> function is <code>func Split(s, sep string) []string</code>. To convert a string to all lowercase letters, use the ToLower function and to convert a string to all uppercase letters, use the ToUpper function.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"strings"</span></div><div class="line">)</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    fmt.Println(strings.ToUpper(<span class="string">"test"</span>)) <span class="comment">//"TEST"</span></div><div class="line">    fmt.Println(strings.ToLower(<span class="string">"TEST"</span>)) <span class="comment">//"test"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The signature of the <code>ToUpper</code> function is <code>func ToUpper(s string) string</code>. The signature of the <code>ToLower</code> function is <code>func ToLower(s string) string</code>. Sometimes we need to work with strings as binary data. To convert a string to a slice of bytes (and vice versa), do this.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">arr := []<span class="keyword">byte</span>(<span class="string">"test"</span>)</div><div class="line">str := <span class="keyword">string</span>([]<span class="keyword">byte</span>&#123;<span class="string">'t'</span>,<span class="string">'e'</span>,<span class="string">'s'</span>,<span class="string">'t'</span>&#125;)</div></pre></td></tr></table></figure></p>
<h2 id="Creating-packages"><a href="#Creating-packages" class="headerlink" title="Creating packages"></a>Creating packages</h2><p>Create a folder in ~/src/code called program. Inside that folder, create a file called <code>main.go</code> using the following code.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main <span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="keyword">import</span> <span class="string">"code/program/math"</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    xs := []<span class="keyword">float64</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</div><div class="line">    avg := math.Average(xs)</div><div class="line">    fmt.Println(avg)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Now create another folder inside of the <code>program</code> folder called <code>math</code>. Inside of this folder, create a file called <code>math.go</code> that contains this.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> math</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Average</span><span class="params">(xs []<span class="keyword">float64</span>)</span> <span class="title">float64</span></span> &#123;</div><div class="line">    total := <span class="keyword">float64</span>(<span class="number">0</span>)</div><div class="line">    <span class="keyword">for</span> _, x := <span class="keyword">range</span> xs &#123;</div><div class="line">        total += x</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> total / <span class="keyword">float64</span>(<span class="built_in">len</span>(xs))</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>From the change directory into the <code>math</code> folder you just created and run go install. This will compile the <code>math.go</code> program and create a linkable object file: ~/pkg/os_arch/code/program/math.a (where os is something like windows and arch is something like amd64). Now change back into the <code>program</code> folder and run <code>go run main.go</code>.</p>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>Writing tests for our code is a good way to ensure quality and improve reliability. Go includes a special program that makes writing tests easier <code>go test</code>. The Go compiler knows to ignore code in any files that end with <code>_test.go</code>, so the code defined in this file is only used by go test (and not go install or go build). In the <code>program/math</code> folder, create a new file called <code>math_test.go</code> and add the following code.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> math</div><div class="line"><span class="keyword">import</span> <span class="string">"testing"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAverage</span><span class="params">(t *testing.T)</span></span> &#123;</div><div class="line">    v := Average([]<span class="keyword">float64</span>&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)</div><div class="line">    <span class="keyword">if</span> v != <span class="number">1.5</span> &#123;</div><div class="line">        t.Error(<span class="string">"Expected 1.5, got "</span>, v)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>We import the special testing package and define a function that starts with the word Test (case matters) followed by whatever we want to name our test. To actually run the test, run the following in the same directory <code>go test</code>. The go test command will look for any tests in any of the files in the current folder and run them. Tests are identified by starting a function with the word Test and taking one argument of type <code>`*testing.T</code>.</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/Meet-Yarn-An-improvement-over-npm/" class="prev">PREV</a><a href="/2016/Functional-Thinking-Scala/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://rajabishek.com">Raj Abishek</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-93252193-1",'auto');ga('send','pageview');</script></body></html>